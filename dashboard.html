<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>삼성전자 재무제표 대시보드</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
		}

		.container {
			max-width: 1400px;
			margin: 0 auto;
			background: white;
			border-radius: 20px;
			padding: 40px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
		}

		header {
			text-align: center;
			margin-bottom: 40px;
			border-bottom: 3px solid #667eea;
			padding-bottom: 20px;
		}

		h1 {
			color: #2c3e50;
			font-size: 36px;
			margin-bottom: 10px;
		}

		.subtitle {
			color: #7f8c8d;
			font-size: 16px;
		}

		.view-selector {
			display: flex;
			justify-content: center;
			gap: 20px;
			margin-bottom: 40px;
		}

		.view-btn {
			padding: 15px 40px;
			font-size: 16px;
			font-weight: bold;
			border: none;
			border-radius: 50px;
			cursor: pointer;
			transition: all 0.3s ease;
			background: #ecf0f1;
			color: #2c3e50;
		}

		.view-btn.active {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			transform: scale(1.05);
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
		}

		.view-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0,0,0,0.2);
		}

		.view-content {
			display: none;
		}

		.view-content.active {
			display: block;
			animation: fadeIn 0.5s ease;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.chart-container {
			position: relative;
			height: 500px;
			margin-bottom: 40px;
			background: #f8f9fa;
			padding: 20px;
			border-radius: 15px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.08);
		}

		.t-account-container {
			max-width: 900px;
			margin: 0 auto;
		}

		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-top: 30px;
		}

		.stat-card {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			padding: 25px;
			border-radius: 15px;
			text-align: center;
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
		}

		.stat-card h3 {
			font-size: 14px;
			margin-bottom: 10px;
			opacity: 0.9;
		}

		.stat-card .value {
			font-size: 24px;
			font-weight: bold;
		}

		.footer {
			text-align: center;
			margin-top: 40px;
			padding-top: 20px;
			border-top: 2px solid #ecf0f1;
			color: #7f8c8d;
			font-size: 14px;
		}

		#tAccountImage {
			width: 100%;
			height: auto;
			border-radius: 10px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
		}
	</style>
</head>
<body>
	<div class="container">
		<header>
			<h1>📊 삼성전자 재무제표 대시보드</h1>
			<p class="subtitle">Samsung Electronics Financial Dashboard</p>
		</header>

		<div class="view-selector">
			<button class="view-btn active" onclick="switchView('trend')">
				📈 10년 매출/영업이익 추이
			</button>
			<button class="view-btn" onclick="switchView('tAccount')">
				📋 2023년 손익계산서 (T-Account)
			</button>
		</div>

		<!-- 추이 차트 뷰 -->
		<div id="trendView" class="view-content active">
			<div class="chart-container">
				<canvas id="trendChart"></canvas>
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<h3>최근 매출 (2024)</h3>
					<div class="value" id="latestRevenue">-</div>
				</div>
				<div class="stat-card">
					<h3>최근 영업이익 (2024)</h3>
					<div class="value" id="latestProfit">-</div>
				</div>
				<div class="stat-card">
					<h3>최근 영업이익률</h3>
					<div class="value" id="latestMargin">-</div>
				</div>
				<div class="stat-card">
					<h3>10년 평균 영업이익률</h3>
					<div class="value" id="avgMargin">-</div>
				</div>
			</div>
		</div>

		<!-- T-Account 뷰 -->
		<div id="tAccountView" class="view-content">
			<div class="t-account-container">
				<img id="tAccountImage" src="samsung_income_statement_t_account.png" alt="삼성전자 손익계산서">
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<h3>2023 매출</h3>
					<div class="value">258.9조원</div>
				</div>
				<div class="stat-card">
					<h3>2023 영업이익</h3>
					<div class="value">6.6조원</div>
				</div>
				<div class="stat-card">
					<h3>2023 영업이익률</h3>
					<div class="value">2.54%</div>
				</div>
				<div class="stat-card">
					<h3>전년 대비</h3>
					<div class="value">-84.9%</div>
				</div>
			</div>
		</div>

		<div class="footer">
			<p>📡 데이터 출처: 금융감독원 전자공시시스템 (DART)</p>
			<p>🏢 기업: 삼성전자(주) | 업데이트: 2025년</p>
		</div>
	</div>

	<script>
		let trendChart = null;
		let financialData = [];

		// 뷰 전환 함수
		function switchView(viewName) {
			// 버튼 활성화 상태 변경
			document.querySelectorAll('.view-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			event.target.classList.add('active');

			// 뷰 전환
			document.querySelectorAll('.view-content').forEach(content => {
				content.classList.remove('active');
			});

			if (viewName === 'trend') {
				document.getElementById('trendView').classList.add('active');
			} else if (viewName === 'tAccount') {
				document.getElementById('tAccountView').classList.add('active');
			}
		}

		// 데이터 로드 및 차트 생성
		async function loadData() {
			try {
				const response = await fetch('samsung_10year_data.json');
				financialData = await response.json();

				// 매출이 있는 데이터만 필터링 (2019년부터)
				financialData = financialData.filter(d => d.revenue > 0);

				createTrendChart();
				updateStats();
			} catch (error) {
				console.error('데이터 로드 실패:', error);
			}
		}

		// 추이 차트 생성
		function createTrendChart() {
			const ctx = document.getElementById('trendChart').getContext('2d');

			const years = financialData.map(d => d.year + '년');
			const revenues = financialData.map(d => d.revenue / 1000000000000); // 조원 단위
			const profits = financialData.map(d => d.operating_profit / 1000000000000); // 조원 단위

			if (trendChart) {
				trendChart.destroy();
			}

			trendChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: years,
					datasets: [
						{
							label: '매출 (조원)',
							data: revenues,
							backgroundColor: 'rgba(102, 126, 234, 0.7)',
							borderColor: 'rgba(102, 126, 234, 1)',
							borderWidth: 2,
							borderRadius: 8,
							yAxisID: 'y'
						},
						{
							label: '영업이익 (조원)',
							data: profits,
							type: 'line',
							borderColor: 'rgba(255, 99, 132, 1)',
							backgroundColor: 'rgba(255, 99, 132, 0.2)',
							borderWidth: 3,
							pointRadius: 6,
							pointHoverRadius: 8,
							pointBackgroundColor: 'rgba(255, 99, 132, 1)',
							pointBorderColor: '#fff',
							pointBorderWidth: 2,
							tension: 0.4,
							yAxisID: 'y'
						}
					]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					interaction: {
						mode: 'index',
						intersect: false,
					},
					plugins: {
						title: {
							display: true,
							text: '삼성전자 10년 매출 및 영업이익 추이',
							font: {
								size: 20,
								weight: 'bold'
							},
							color: '#2c3e50'
						},
						legend: {
							display: true,
							position: 'top',
							labels: {
								font: {
									size: 14
								},
								usePointStyle: true,
								padding: 20
							}
						},
						tooltip: {
							backgroundColor: 'rgba(0, 0, 0, 0.8)',
							padding: 15,
							bodyFont: {
								size: 14
							},
							callbacks: {
								label: function(context) {
									let label = context.dataset.label || '';
									if (label) {
										label += ': ';
									}
									label += context.parsed.y.toFixed(2) + '조원';
									return label;
								}
							}
						}
					},
					scales: {
						y: {
							type: 'linear',
							display: true,
							position: 'left',
							beginAtZero: true,
							ticks: {
								callback: function(value) {
									return value.toFixed(0) + '조원';
								},
								font: {
									size: 12
								}
							},
							grid: {
								color: 'rgba(0, 0, 0, 0.05)'
							}
						},
						x: {
							grid: {
								display: false
							},
							ticks: {
								font: {
									size: 12
								}
							}
						}
					}
				}
			});
		}

		// 통계 업데이트
		function updateStats() {
			if (financialData.length === 0) return;

			const latest = financialData[financialData.length - 1];
			const avgMargin = financialData.reduce((sum, d) => sum + d.operating_margin, 0) / financialData.length;

			document.getElementById('latestRevenue').textContent =
				(latest.revenue / 1000000000000).toFixed(1) + '조원';

			document.getElementById('latestProfit').textContent =
				(latest.operating_profit / 1000000000000).toFixed(1) + '조원';

			document.getElementById('latestMargin').textContent =
				latest.operating_margin.toFixed(2) + '%';

			document.getElementById('avgMargin').textContent =
				avgMargin.toFixed(2) + '%';
		}

		// 페이지 로드 시 데이터 로드
		window.addEventListener('load', loadData);
	</script>
</body>
</html>
