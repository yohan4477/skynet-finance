<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ì‚¼ì„±ì „ì ì¬ë¬´ì œí‘œ ëŒ€ì‹œë³´ë“œ</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
		}

		.container {
			max-width: 1400px;
			margin: 0 auto;
			background: white;
			border-radius: 20px;
			padding: 40px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
		}

		header {
			text-align: center;
			margin-bottom: 40px;
			border-bottom: 3px solid #667eea;
			padding-bottom: 20px;
		}

		h1 {
			color: #2c3e50;
			font-size: 36px;
			margin-bottom: 10px;
		}

		.subtitle {
			color: #7f8c8d;
			font-size: 16px;
		}

		.view-selector {
			display: flex;
			justify-content: center;
			gap: 20px;
			margin-bottom: 40px;
		}

		.view-btn {
			padding: 15px 40px;
			font-size: 16px;
			font-weight: bold;
			border: none;
			border-radius: 50px;
			cursor: pointer;
			transition: all 0.3s ease;
			background: #ecf0f1;
			color: #2c3e50;
		}

		.view-btn.active {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			transform: scale(1.05);
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
		}

		.view-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0,0,0,0.2);
		}

		.view-content {
			display: none;
		}

		.view-content.active {
			display: block;
			animation: fadeIn 0.5s ease;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.chart-container {
			position: relative;
			height: 500px;
			margin-bottom: 40px;
			background: #f8f9fa;
			padding: 20px;
			border-radius: 15px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.08);
		}

		.t-account-container {
			max-width: 900px;
			margin: 0 auto;
		}

		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-top: 30px;
		}

		.stat-card {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			padding: 25px;
			border-radius: 15px;
			text-align: center;
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
		}

		.stat-card h3 {
			font-size: 14px;
			margin-bottom: 10px;
			opacity: 0.9;
		}

		.stat-card .value {
			font-size: 24px;
			font-weight: bold;
		}

		.footer {
			text-align: center;
			margin-top: 40px;
			padding-top: 20px;
			border-top: 2px solid #ecf0f1;
			color: #7f8c8d;
			font-size: 14px;
		}

		#tAccountImage {
			width: 100%;
			height: auto;
			border-radius: 10px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
		}
	</style>
</head>
<body>
	<div class="container">
		<header>
			<h1>ğŸ“Š ì‚¼ì„±ì „ì ì¬ë¬´ì œí‘œ ëŒ€ì‹œë³´ë“œ</h1>
			<p class="subtitle">Samsung Electronics Financial Dashboard</p>
		</header>

		<div class="view-selector">
			<button class="view-btn active" onclick="switchView('trend')">
				ğŸ“ˆ 10ë…„ ë§¤ì¶œ/ì˜ì—…ì´ìµ ì¶”ì´
			</button>
			<button class="view-btn" onclick="switchView('tAccount')">
				ğŸ“‹ 2023ë…„ ì†ìµê³„ì‚°ì„œ (T-Account)
			</button>
		</div>

		<!-- ì¶”ì´ ì°¨íŠ¸ ë·° -->
		<div id="trendView" class="view-content active">
			<div class="chart-container">
				<canvas id="trendChart"></canvas>
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<h3>ìµœê·¼ ë§¤ì¶œ (2024)</h3>
					<div class="value" id="latestRevenue">-</div>
				</div>
				<div class="stat-card">
					<h3>ìµœê·¼ ì˜ì—…ì´ìµ (2024)</h3>
					<div class="value" id="latestProfit">-</div>
				</div>
				<div class="stat-card">
					<h3>ìµœê·¼ ì˜ì—…ì´ìµë¥ </h3>
					<div class="value" id="latestMargin">-</div>
				</div>
				<div class="stat-card">
					<h3>10ë…„ í‰ê·  ì˜ì—…ì´ìµë¥ </h3>
					<div class="value" id="avgMargin">-</div>
				</div>
			</div>
		</div>

		<!-- T-Account ë·° -->
		<div id="tAccountView" class="view-content">
			<div class="t-account-container">
				<img id="tAccountImage" src="samsung_income_statement_t_account.png" alt="ì‚¼ì„±ì „ì ì†ìµê³„ì‚°ì„œ">
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<h3>2023 ë§¤ì¶œ</h3>
					<div class="value">258.9ì¡°ì›</div>
				</div>
				<div class="stat-card">
					<h3>2023 ì˜ì—…ì´ìµ</h3>
					<div class="value">6.6ì¡°ì›</div>
				</div>
				<div class="stat-card">
					<h3>2023 ì˜ì—…ì´ìµë¥ </h3>
					<div class="value">2.54%</div>
				</div>
				<div class="stat-card">
					<h3>ì „ë…„ ëŒ€ë¹„</h3>
					<div class="value">-84.9%</div>
				</div>
			</div>
		</div>

		<div class="footer">
			<p>ğŸ“¡ ë°ì´í„° ì¶œì²˜: ê¸ˆìœµê°ë…ì› ì „ìê³µì‹œì‹œìŠ¤í…œ (DART)</p>
			<p>ğŸ¢ ê¸°ì—…: ì‚¼ì„±ì „ì(ì£¼) | ì—…ë°ì´íŠ¸: 2025ë…„</p>
		</div>
	</div>

	<script>
		let trendChart = null;
		let financialData = [];

		// ë·° ì „í™˜ í•¨ìˆ˜
		function switchView(viewName) {
			// ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
			document.querySelectorAll('.view-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			event.target.classList.add('active');

			// ë·° ì „í™˜
			document.querySelectorAll('.view-content').forEach(content => {
				content.classList.remove('active');
			});

			if (viewName === 'trend') {
				document.getElementById('trendView').classList.add('active');
			} else if (viewName === 'tAccount') {
				document.getElementById('tAccountView').classList.add('active');
			}
		}

		// ë°ì´í„° ë¡œë“œ ë° ì°¨íŠ¸ ìƒì„±
		async function loadData() {
			try {
				const response = await fetch('samsung_10year_data.json');
				financialData = await response.json();

				// ë§¤ì¶œì´ ìˆëŠ” ë°ì´í„°ë§Œ í•„í„°ë§ (2019ë…„ë¶€í„°)
				financialData = financialData.filter(d => d.revenue > 0);

				createTrendChart();
				updateStats();
			} catch (error) {
				console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
			}
		}

		// ì¶”ì´ ì°¨íŠ¸ ìƒì„±
		function createTrendChart() {
			const ctx = document.getElementById('trendChart').getContext('2d');

			const years = financialData.map(d => d.year + 'ë…„');
			const revenues = financialData.map(d => d.revenue / 1000000000000); // ì¡°ì› ë‹¨ìœ„
			const profits = financialData.map(d => d.operating_profit / 1000000000000); // ì¡°ì› ë‹¨ìœ„

			if (trendChart) {
				trendChart.destroy();
			}

			trendChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: years,
					datasets: [
						{
							label: 'ë§¤ì¶œ (ì¡°ì›)',
							data: revenues,
							backgroundColor: 'rgba(102, 126, 234, 0.7)',
							borderColor: 'rgba(102, 126, 234, 1)',
							borderWidth: 2,
							borderRadius: 8,
							yAxisID: 'y'
						},
						{
							label: 'ì˜ì—…ì´ìµ (ì¡°ì›)',
							data: profits,
							type: 'line',
							borderColor: 'rgba(255, 99, 132, 1)',
							backgroundColor: 'rgba(255, 99, 132, 0.2)',
							borderWidth: 3,
							pointRadius: 6,
							pointHoverRadius: 8,
							pointBackgroundColor: 'rgba(255, 99, 132, 1)',
							pointBorderColor: '#fff',
							pointBorderWidth: 2,
							tension: 0.4,
							yAxisID: 'y'
						}
					]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					interaction: {
						mode: 'index',
						intersect: false,
					},
					plugins: {
						title: {
							display: true,
							text: 'ì‚¼ì„±ì „ì 10ë…„ ë§¤ì¶œ ë° ì˜ì—…ì´ìµ ì¶”ì´',
							font: {
								size: 20,
								weight: 'bold'
							},
							color: '#2c3e50'
						},
						legend: {
							display: true,
							position: 'top',
							labels: {
								font: {
									size: 14
								},
								usePointStyle: true,
								padding: 20
							}
						},
						tooltip: {
							backgroundColor: 'rgba(0, 0, 0, 0.8)',
							padding: 15,
							bodyFont: {
								size: 14
							},
							callbacks: {
								label: function(context) {
									let label = context.dataset.label || '';
									if (label) {
										label += ': ';
									}
									label += context.parsed.y.toFixed(2) + 'ì¡°ì›';
									return label;
								}
							}
						}
					},
					scales: {
						y: {
							type: 'linear',
							display: true,
							position: 'left',
							beginAtZero: true,
							ticks: {
								callback: function(value) {
									return value.toFixed(0) + 'ì¡°ì›';
								},
								font: {
									size: 12
								}
							},
							grid: {
								color: 'rgba(0, 0, 0, 0.05)'
							}
						},
						x: {
							grid: {
								display: false
							},
							ticks: {
								font: {
									size: 12
								}
							}
						}
					}
				}
			});
		}

		// í†µê³„ ì—…ë°ì´íŠ¸
		function updateStats() {
			if (financialData.length === 0) return;

			const latest = financialData[financialData.length - 1];
			const avgMargin = financialData.reduce((sum, d) => sum + d.operating_margin, 0) / financialData.length;

			document.getElementById('latestRevenue').textContent =
				(latest.revenue / 1000000000000).toFixed(1) + 'ì¡°ì›';

			document.getElementById('latestProfit').textContent =
				(latest.operating_profit / 1000000000000).toFixed(1) + 'ì¡°ì›';

			document.getElementById('latestMargin').textContent =
				latest.operating_margin.toFixed(2) + '%';

			document.getElementById('avgMargin').textContent =
				avgMargin.toFixed(2) + '%';
		}

		// í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
		window.addEventListener('load', loadData);
	</script>
</body>
</html>
