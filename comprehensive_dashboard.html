<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ì‚¼ì„±ì „ì ì¢…í•© ì¬ë¬´ì œí‘œ ëŒ€ì‹œë³´ë“œ</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
		}

		.container {
			max-width: 1600px;
			margin: 0 auto;
			background: white;
			border-radius: 20px;
			padding: 40px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
		}

		header {
			text-align: center;
			margin-bottom: 30px;
			border-bottom: 3px solid #667eea;
			padding-bottom: 20px;
		}

		h1 {
			color: #2c3e50;
			font-size: 36px;
			margin-bottom: 10px;
		}

		.subtitle {
			color: #7f8c8d;
			font-size: 16px;
		}

		.view-selector {
			display: flex;
			justify-content: center;
			flex-wrap: wrap;
			gap: 15px;
			margin-bottom: 30px;
		}

		.view-btn {
			padding: 12px 30px;
			font-size: 14px;
			font-weight: bold;
			border: none;
			border-radius: 50px;
			cursor: pointer;
			transition: all 0.3s ease;
			background: #ecf0f1;
			color: #2c3e50;
		}

		.view-btn.active {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			transform: scale(1.05);
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
		}

		.view-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0,0,0,0.2);
		}

		.view-content {
			display: none;
		}

		.view-content.active {
			display: block;
			animation: fadeIn 0.5s ease;
		}

		@keyframes fadeIn {
			from { opacity: 0; transform: translateY(20px); }
			to { opacity: 1; transform: translateY(0); }
		}

		.chart-container {
			position: relative;
			height: 500px;
			margin-bottom: 30px;
			background: #f8f9fa;
			padding: 20px;
			border-radius: 15px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.08);
		}

		.filter-container {
			text-align: center;
			margin-bottom: 20px;
		}

		.filter-container select {
			padding: 10px 20px;
			font-size: 14px;
			border: 2px solid #667eea;
			border-radius: 10px;
			background: white;
			cursor: pointer;
		}

		.balance-sheet-container {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 20px;
			margin-bottom: 30px;
		}

		.bs-column {
			background: #f8f9fa;
			padding: 20px;
			border-radius: 15px;
			box-shadow: 0 5px 15px rgba(0,0,0,0.08);
		}

		.bs-column h3 {
			text-align: center;
			margin-bottom: 20px;
			font-size: 20px;
			color: #2c3e50;
		}

		.bs-item {
			padding: 15px;
			margin-bottom: 10px;
			background: white;
			border-radius: 10px;
			cursor: pointer;
			transition: all 0.3s ease;
			border-left: 5px solid transparent;
		}

		.bs-item:hover {
			transform: translateX(5px);
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
		}

		.bs-item.asset { border-left-color: #3498db; }
		.bs-item.liability { border-left-color: #e74c3c; }
		.bs-item.equity { border-left-color: #2ecc71; }

		.bs-item .label {
			font-weight: bold;
			color: #2c3e50;
			margin-bottom: 5px;
		}

		.bs-item .amount {
			font-size: 18px;
			color: #667eea;
			font-weight: bold;
		}

		.bs-item .tooltip {
			display: none;
			margin-top: 10px;
			padding: 10px;
			background: #ecf0f1;
			border-radius: 5px;
			font-size: 12px;
			color: #7f8c8d;
		}

		.bs-item:hover .tooltip {
			display: block;
		}

		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
			gap: 15px;
			margin-top: 20px;
		}

		.stat-card {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			padding: 20px;
			border-radius: 15px;
			text-align: center;
			box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
		}

		.stat-card h3 {
			font-size: 13px;
			margin-bottom: 10px;
			opacity: 0.9;
		}

		.stat-card .value {
			font-size: 22px;
			font-weight: bold;
		}

		.footer {
			text-align: center;
			margin-top: 30px;
			padding-top: 20px;
			border-top: 2px solid #ecf0f1;
			color: #7f8c8d;
			font-size: 14px;
		}
	</style>
</head>
<body>
	<div class="container">
		<header>
			<h1>ğŸ“Š ì‚¼ì„±ì „ì ì¢…í•© ì¬ë¬´ì œí‘œ ëŒ€ì‹œë³´ë“œ</h1>
			<p class="subtitle">Samsung Electronics Comprehensive Financial Dashboard</p>
		</header>

		<div class="view-selector">
			<button class="view-btn active" onclick="switchView('trend')">ğŸ“ˆ 10ë…„ ë§¤ì¶œ/ì˜ì—…ì´ìµ</button>
			<button class="view-btn" onclick="switchView('cashflowTrend')">ğŸ’§ 10ë…„ í˜„ê¸ˆíë¦„ ì¶”ì´</button>
			<button class="view-btn" onclick="switchView('waterfall')">ğŸŒŠ ì›Œí„°í´ í˜„ê¸ˆíë¦„</button>
			<button class="view-btn" onclick="switchView('tAccount')">ğŸ“‹ ì†ìµê³„ì‚°ì„œ (T-Account)</button>
			<button class="view-btn" onclick="switchView('balanceSheet')">âš–ï¸ ì¬ë¬´ìƒíƒœí‘œ</button>
		</div>

		<!-- 1. 10ë…„ ë§¤ì¶œ/ì˜ì—…ì´ìµ ì¶”ì´ -->
		<div id="trendView" class="view-content active">
			<div class="chart-container">
				<canvas id="trendChart"></canvas>
			</div>
			<div class="stats-grid">
				<div class="stat-card">
					<h3>ìµœê·¼ ë§¤ì¶œ (2024)</h3>
					<div class="value" id="latestRevenue">-</div>
				</div>
				<div class="stat-card">
					<h3>ìµœê·¼ ì˜ì—…ì´ìµ (2024)</h3>
					<div class="value" id="latestProfit">-</div>
				</div>
				<div class="stat-card">
					<h3>ìµœê·¼ ì˜ì—…ì´ìµë¥ </h3>
					<div class="value" id="latestMargin">-</div>
				</div>
				<div class="stat-card">
					<h3>10ë…„ í‰ê·  ì˜ì—…ì´ìµë¥ </h3>
					<div class="value" id="avgMargin">-</div>
				</div>
			</div>
		</div>

		<!-- 2. 10ë…„ í˜„ê¸ˆíë¦„ ì¶”ì´ -->
		<div id="cashflowTrendView" class="view-content">
			<div class="chart-container">
				<canvas id="cashflowTrendChart"></canvas>
			</div>
			<div class="stats-grid">
				<div class="stat-card" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);">
					<h3>í‰ê·  ì˜ì—…í™œë™ CF</h3>
					<div class="value" id="avgOperatingCF">-</div>
				</div>
				<div class="stat-card" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
					<h3>í‰ê·  íˆ¬ìí™œë™ CF</h3>
					<div class="value" id="avgInvestingCF">-</div>
				</div>
				<div class="stat-card" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);">
					<h3>í‰ê·  ì¬ë¬´í™œë™ CF</h3>
					<div class="value" id="avgFinancingCF">-</div>
				</div>
			</div>
		</div>

		<!-- 3. ì›Œí„°í´ í˜„ê¸ˆíë¦„ -->
		<div id="waterfallView" class="view-content">
			<div class="filter-container">
				<select id="cfPeriodType" onchange="updateWaterfall()">
					<option value="annual">ì—°ë„ë³„</option>
					<option value="quarterly">ë¶„ê¸°ë³„</option>
				</select>
				<select id="cfPeriodSelect" onchange="updateWaterfall()">
					<option value="2024">2024ë…„</option>
					<option value="2023">2023ë…„</option>
					<option value="2022">2022ë…„</option>
				</select>
			</div>
			<div class="chart-container">
				<canvas id="waterfallChart"></canvas>
			</div>
		</div>

		<!-- 4. T-Account ì†ìµê³„ì‚°ì„œ -->
		<div id="tAccountView" class="view-content">
			<div style="max-width: 900px; margin: 0 auto;">
				<img src="samsung_income_statement_t_account.png" style="width: 100%; border-radius: 10px;">
			</div>
			<div class="stats-grid">
				<div class="stat-card">
					<h3>2023 ë§¤ì¶œ</h3>
					<div class="value">258.9ì¡°ì›</div>
				</div>
				<div class="stat-card">
					<h3>2023 ì˜ì—…ì´ìµ</h3>
					<div class="value">6.6ì¡°ì›</div>
				</div>
				<div class="stat-card">
					<h3>2023 ì˜ì—…ì´ìµë¥ </h3>
					<div class="value">2.54%</div>
				</div>
			</div>
		</div>

		<!-- 5. ì¬ë¬´ìƒíƒœí‘œ -->
		<div id="balanceSheetView" class="view-content">
			<div class="balance-sheet-container">
				<div class="bs-column">
					<h3>ğŸ’° ìì‚° (Assets)</h3>
					<div class="bs-item asset">
						<div class="label">ìœ ë™ìì‚°</div>
						<div class="amount">195.9ì¡°ì›</div>
						<div class="tooltip">í˜„ê¸ˆì„±ìì‚°, ë‹¨ê¸°ê¸ˆìœµìƒí’ˆ, ë§¤ì¶œì±„ê¶Œ, ì¬ê³ ìì‚° ë“±</div>
					</div>
					<div class="bs-item asset">
						<div class="label">ë¹„ìœ ë™ìì‚°</div>
						<div class="amount">260.0ì¡°ì›</div>
						<div class="tooltip">ìœ í˜•ìì‚°, ë¬´í˜•ìì‚°, ì¥ê¸°ê¸ˆìœµìì‚° ë“±</div>
					</div>
					<div class="bs-item asset" style="background: #e3f2fd;">
						<div class="label" style="font-size: 18px;">ìì‚° ì´ê³„</div>
						<div class="amount" style="font-size: 24px;">455.9ì¡°ì›</div>
					</div>
				</div>
				<div class="bs-column">
					<h3>ğŸ’³ ë¶€ì±„ & ìë³¸ (Liabilities & Equity)</h3>
					<div class="bs-item liability">
						<div class="label">ìœ ë™ë¶€ì±„</div>
						<div class="amount">75.7ì¡°ì›</div>
						<div class="tooltip">ë§¤ì…ì±„ë¬´, ë‹¨ê¸°ì°¨ì…ê¸ˆ, ë¯¸ì§€ê¸‰ê¸ˆ ë“±</div>
					</div>
					<div class="bs-item liability">
						<div class="label">ë¹„ìœ ë™ë¶€ì±„</div>
						<div class="amount">16.5ì¡°ì›</div>
						<div class="tooltip">ì¥ê¸°ì°¨ì…ê¸ˆ, ì‚¬ì±„, í‡´ì§ê¸‰ì—¬ì¶©ë‹¹ë¶€ì±„ ë“±</div>
					</div>
					<div class="bs-item equity">
						<div class="label">ìë³¸</div>
						<div class="amount">363.7ì¡°ì›</div>
						<div class="tooltip">ìë³¸ê¸ˆ, ìë³¸ì‰ì—¬ê¸ˆ, ì´ìµì‰ì—¬ê¸ˆ, ê¸°íƒ€í¬ê´„ì†ìµëˆ„ê³„ì•¡ ë“±</div>
					</div>
					<div class="bs-item" style="background: #e8f5e9;">
						<div class="label" style="font-size: 18px;">ë¶€ì±„ + ìë³¸ ì´ê³„</div>
						<div class="amount" style="font-size: 24px;">455.9ì¡°ì›</div>
					</div>
				</div>
			</div>
			<div class="stats-grid">
				<div class="stat-card">
					<h3>ë¶€ì±„ë¹„ìœ¨</h3>
					<div class="value">25.4%</div>
				</div>
				<div class="stat-card">
					<h3>ìœ ë™ë¹„ìœ¨</h3>
					<div class="value">258.8%</div>
				</div>
				<div class="stat-card">
					<h3>ìê¸°ìë³¸ë¹„ìœ¨</h3>
					<div class="value">79.8%</div>
				</div>
			</div>
		</div>

		<div class="footer">
			<p>ğŸ“¡ ë°ì´í„° ì¶œì²˜: ê¸ˆìœµê°ë…ì› ì „ìê³µì‹œì‹œìŠ¤í…œ (DART)</p>
			<p>ğŸ¢ ê¸°ì—…: ì‚¼ì„±ì „ì(ì£¼) | ì—…ë°ì´íŠ¸: 2025ë…„</p>
		</div>
	</div>

	<script>
		let charts = {
			trend: null,
			cashflowTrend: null,
			waterfall: null
		};

		let data = {
			financial: [],
			cashflow: null
		};

		// ë·° ì „í™˜
		function switchView(viewName) {
			document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
			event.target.classList.add('active');
			document.querySelectorAll('.view-content').forEach(content => content.classList.remove('active'));
			document.getElementById(viewName + 'View').classList.add('active');
		}

		// ë°ì´í„° ë¡œë“œ
		async function loadData() {
			try {
				const [financialRes, cashflowRes] = await Promise.all([
					fetch('samsung_10year_data.json'),
					fetch('samsung_cashflow_data.json')
				]);

				data.financial = (await financialRes.json()).filter(d => d.revenue > 0);
				data.cashflow = await cashflowRes.json();

				createAllCharts();
				updateStats();
			} catch (error) {
				console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
			}
		}

		// ëª¨ë“  ì°¨íŠ¸ ìƒì„±
		function createAllCharts() {
			createTrendChart();
			createCashflowTrendChart();
			updateWaterfall();
		}

		// 1. ë§¤ì¶œ/ì˜ì—…ì´ìµ ì¶”ì´
		function createTrendChart() {
			const ctx = document.getElementById('trendChart').getContext('2d');
			const years = data.financial.map(d => d.year + 'ë…„');
			const revenues = data.financial.map(d => d.revenue / 1000000000000);
			const profits = data.financial.map(d => d.operating_profit / 1000000000000);

			if (charts.trend) charts.trend.destroy();
			charts.trend = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: years,
					datasets: [{
						label: 'ë§¤ì¶œ (ì¡°ì›)',
						data: revenues,
						backgroundColor: 'rgba(102, 126, 234, 0.7)',
						borderColor: 'rgba(102, 126, 234, 1)',
						borderWidth: 2,
						borderRadius: 8
					}, {
						label: 'ì˜ì—…ì´ìµ (ì¡°ì›)',
						data: profits,
						type: 'line',
						borderColor: 'rgba(255, 99, 132, 1)',
						backgroundColor: 'rgba(255, 99, 132, 0.2)',
						borderWidth: 3,
						pointRadius: 6,
						tension: 0.4
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						title: { display: true, text: 'ì‚¼ì„±ì „ì 10ë…„ ë§¤ì¶œ ë° ì˜ì—…ì´ìµ ì¶”ì´', font: { size: 18 } },
						legend: { display: true, position: 'top' }
					},
					scales: {
						y: { beginAtZero: true, ticks: { callback: v => v.toFixed(0) + 'ì¡°ì›' } }
					}
				}
			});
		}

		// 2. í˜„ê¸ˆíë¦„ ì¶”ì´
		function createCashflowTrendChart() {
			const ctx = document.getElementById('cashflowTrendChart').getContext('2d');
			const cfData = data.cashflow.annual;
			const years = cfData.map(d => d.year + 'ë…„');
			const operating = cfData.map(d => d.operating_cf / 1000000000000);
			const investing = cfData.map(d => d.investing_cf / 1000000000000);
			const financing = cfData.map(d => d.financing_cf / 1000000000000);

			if (charts.cashflowTrend) charts.cashflowTrend.destroy();
			charts.cashflowTrend = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: years,
					datasets: [{
						label: 'ì˜ì—…í™œë™ CF',
						data: operating,
						backgroundColor: 'rgba(52, 152, 219, 0.8)',
						borderColor: 'rgba(52, 152, 219, 1)',
						borderWidth: 2
					}, {
						label: 'íˆ¬ìí™œë™ CF',
						data: investing,
						backgroundColor: 'rgba(243, 156, 18, 0.8)',
						borderColor: 'rgba(243, 156, 18, 1)',
						borderWidth: 2
					}, {
						label: 'ì¬ë¬´í™œë™ CF',
						data: financing,
						backgroundColor: 'rgba(46, 204, 113, 0.8)',
						borderColor: 'rgba(46, 204, 113, 1)',
						borderWidth: 2
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						title: { display: true, text: 'ì‚¼ì„±ì „ì 10ë…„ í˜„ê¸ˆíë¦„ ì¶”ì´', font: { size: 18 } },
						legend: { display: true, position: 'top' }
					},
					scales: {
						y: { ticks: { callback: v => v.toFixed(0) + 'ì¡°ì›' } }
					}
				}
			});

			// í†µê³„ ì—…ë°ì´íŠ¸
			const avgOp = operating.reduce((a,b)=>a+b,0) / operating.length;
			const avgInv = investing.reduce((a,b)=>a+b,0) / investing.length;
			const avgFin = financing.reduce((a,b)=>a+b,0) / financing.length;
			document.getElementById('avgOperatingCF').textContent = avgOp.toFixed(1) + 'ì¡°ì›';
			document.getElementById('avgInvestingCF').textContent = avgInv.toFixed(1) + 'ì¡°ì›';
			document.getElementById('avgFinancingCF').textContent = avgFin.toFixed(1) + 'ì¡°ì›';
		}

		// 3. ì›Œí„°í´ ì°¨íŠ¸
		function updateWaterfall() {
			const periodType = document.getElementById('cfPeriodType').value;
			const period = document.getElementById('cfPeriodSelect').value;

			let cfData;
			if (periodType === 'annual') {
				cfData = data.cashflow.annual.find(d => d.year == period);
			} else {
				cfData = data.cashflow.quarterly[0]; // ì„ì‹œ
			}

			if (!cfData) return;

			const ctx = document.getElementById('waterfallChart').getContext('2d');
			const beginning = cfData.beginning_cash / 1000000000000;
			const operating = cfData.operating_cf / 1000000000000;
			const investing = cfData.investing_cf / 1000000000000;
			const financing = cfData.financing_cf / 1000000000000;
			const ending = cfData.ending_cash / 1000000000000;

			const labels = ['ê¸°ì´ˆí˜„ê¸ˆ', 'ì˜ì—…í™œë™', 'íˆ¬ìí™œë™', 'ì¬ë¬´í™œë™', 'ê¸°ë§í˜„ê¸ˆ'];
			const values = [beginning, operating, investing, financing, ending];

			if (charts.waterfall) charts.waterfall.destroy();
			charts.waterfall = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [{
						label: 'í˜„ê¸ˆíë¦„ (ì¡°ì›)',
						data: values,
						backgroundColor: [
							'rgba(149, 165, 166, 0.8)',
							'rgba(52, 152, 219, 0.8)',
							'rgba(243, 156, 18, 0.8)',
							'rgba(46, 204, 113, 0.8)',
							'rgba(52, 73, 94, 0.8)'
						],
						borderColor: [
							'rgba(149, 165, 166, 1)',
							'rgba(52, 152, 219, 1)',
							'rgba(243, 156, 18, 1)',
							'rgba(46, 204, 113, 1)',
							'rgba(52, 73, 94, 1)'
						],
						borderWidth: 2,
						borderRadius: 8
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						title: { display: true, text: `${cfData.period} í˜„ê¸ˆíë¦„ ì›Œí„°í´`, font: { size: 18 } },
						legend: { display: false }
					},
					scales: {
						y: { ticks: { callback: v => v.toFixed(0) + 'ì¡°ì›' } }
					}
				}
			});
		}

		// í†µê³„ ì—…ë°ì´íŠ¸
		function updateStats() {
			const latest = data.financial[data.financial.length - 1];
			const avgMargin = data.financial.reduce((sum, d) => sum + d.operating_margin, 0) / data.financial.length;
			document.getElementById('latestRevenue').textContent = (latest.revenue / 1000000000000).toFixed(1) + 'ì¡°ì›';
			document.getElementById('latestProfit').textContent = (latest.operating_profit / 1000000000000).toFixed(1) + 'ì¡°ì›';
			document.getElementById('latestMargin').textContent = latest.operating_margin.toFixed(2) + '%';
			document.getElementById('avgMargin').textContent = avgMargin.toFixed(2) + '%';
		}

		window.addEventListener('load', loadData);
	</script>
</body>
</html>
